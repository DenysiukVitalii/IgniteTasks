<!DOCTYPE html>
<html lang="en" ng-app="registrationApp">
<head>
    <title>Task 3 | Homework-3</title>
    <meta charset="utf-8">
    <script src="../../Libraries/angular.js"></script>
    <link href="../../Libraries/bootstrap.css" rel="stylesheet" />
    <link href="../../Libraries/bootstrap-theme.css" rel="stylesheet" />
    <style>
        #wrap {
            width: 500px;
            margin: 10px auto;
        }

        label {
            margin-top: 10px;
        }

        form .ng-valid.ng-dirty {
            background-color: lightgreen;
        }

        form .ng-invalid.ng-dirty {
            background-color: lightcoral;
        }
        form .btn-info {
          margin: 10px 0;
        }
        h3 {
          margin: 0;
        }
    </style>
    <script>

        angular.module('registrationApp', [])
        .controller('mainCtrl', function ($scope) {
            $scope.nameRegex = /^[a-zA-Z]|[а-яА-Я]{3,20}$/;
            $scope.mailRegex = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]+$/;
            $scope.phoneRegex = /^[0-9]*$/;

            $scope.submitHandler = function(isvalid) {
              (isvalid) ? alert('Form is Valid, sending data!)') : alert('Form is invalid!');
            }
        });

    </script>
</head>
<body>
    <div id="wrap" ng-controller="mainCtrl" class="well">
        <form class="form-control input-group" novalidate name="myForm" ng-submit="submitHandler(myForm.$valid)">
            <h3 class="text-center">Форма регистрации</h3>
            <div class="form-group">
                <label>Фамилия</label>
                <input name="userSurname" class="input form-control" type="text" ng-model="newUser.surname" required ng-pattern="nameRegex"> <br />
            </div>
            <div class="form-group">
                <label>Имя</label>
                <input name="userName" class="input form-control" type="text" ng-model="newUser.name" required ng-pattern="nameRegex"> <br />
            </div>
            <div class="form-group">
                <label>Отчество</label>
                <input name="userPatronymic" class="input form-control" type="text" ng-model="newUser.patronymic" ng-pattern="nameRegex"> <br />
            </div>
            <div class="form-group">
                <label>Email</label>
                <input name="userEmail" class="input form-control" type="email" ng-model="newUser.email" required ng-pattern="mailRegex"> <br />
            </div>
            <div class="form-group">
                <label>Телефон</label>
                <input name="userPhone" class="input form-control" type="phone" ng-model="newUser.phone" required ng-pattern="phoneRegex"> <br />
            </div>
            <div class="form-group">
                <label>Пароль</label>
                <input name="userPassword" class="input form-control" type="password" ng-model="newUser.password" required> <br />
            </div>
            <div class="form-group">
                <label>Подтверждение пароля</label>
                <input name="userPasswordCheck" class="input form-control" type="password" ng-model="newUser.passwordCheck" required ng-pattern="newUser.password"> <br />
            </div>

            <input class="btn btn-info" type="submit" ng-disabled="myForm.$invalid" value="Подтвердить"> <br />
        </form>
    </div>
</body>
</html>
