<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Task 1 | Classwork-10</title>
</head>
<body>
	<input id="buttonLoad" type="button" value="load img">
	<img id="image"/>
	<script>
		window.onload = function () {
		  var btn = document.getElementById('buttonLoad');
		  var img = document.getElementById('image');
		  btn.onclick = loadImageAsync;

		  function loadImageAsync() {
            var xhr = new XMLHttpRequest();
		        xhr.open('GET', 'img.jpg', true);
		        xhr.withCredentials = true;
		        xhr.responseType = 'arraybuffer';
		        xhr.onload = function(e) {
		          var arr = new Uint8Array(this.response);
		          var raw = String.fromCharCode.apply(null, arr);
		          var b64 = btoa(raw);
		          var dataURL = 'data:image/jpg;base64,' + b64;
		          img.src = dataURL;
		        }
		    xhr.send();
		  }
		  setTimeout(loadImageAsync, 1000);
		}
	</script>
</body>
</html>
